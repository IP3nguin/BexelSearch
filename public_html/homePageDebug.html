<DOCTYPE! HTML>
    <HTML>

    <head>
        <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    </head>

    <body>

        <h2>Welcome to The Home Page!</h2>

        <div class="Search">
            Search bar here
        </div><br>

        <div class="buttons">

            <button type="button" id="logout" onclick="signOut()">Log Out</button>
        </div>
        <a href="sample2.html">load another page</a>



        <script src="https://www.gstatic.com/firebasejs/3.5.2/firebase.js"></script>
        <script>
            // Initialize Firebase
            var config = {
                apiKey: "AIzaSyCHb_Ra7dl02OImTNyEnLoGek4IA5Ck84g",
                authDomain: "bexel-ed8b3.firebaseapp.com",
                databaseURL: "https://bexel-ed8b3.firebaseio.com",
                storageBucket: "bexel-ed8b3.appspot.com",
                messagingSenderId: "325793789014"
            };
            firebase.initializeApp(config);

        </script>

        <script type="text/javascript">
            function signOut(){
                firebase.auth().signOut();
                window.location = 'index';
            }
            
            $(document).ready(function () { // load the function that moves you on if you already signed in.
              var user;
              var unsub = firebase.auth().onAuthStateChanged(function (user) { // create a listener to waits for firebase initialisation before attempting to get currentUser. 
                  user = firebase.auth().currentUser;
                  if (!user) { //if logged in, move user to the homepage
                      window.location = 'index';
                  }
            unsub(); //unsub() here is used to listen on pageload for a user if one is found then move on, if not then stop listening as the return value of unsub() is the function to kill the listener.
        //This is needed as the database connection becomes erratic for other function while listener is active.
    });


});

        </script>


    </body>

    </HTML>
